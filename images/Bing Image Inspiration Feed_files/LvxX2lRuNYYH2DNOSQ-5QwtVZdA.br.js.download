var FeedRenderFixedWidth;(function(n){function e(n){return"".concat(n,"px")}function wt(){u=_qs(r.DenseGridContainerSelector);l=t.WfLayoutConf_hGap;nt=_qs("div.dgc_sep");tt=_ge(r.DenseGridWrapperId)||_d.documentElement;h=[];i=[];o=[]}function dt(){var t=i.length+1,n=sj_ce("ul","mmComponent_images_1_list_".concat(t),"dgControl_list");return n.setAttribute("data-col","".concat(t)),n.setAttribute(r.MutationObserverFlag,"1"),n}function p(){if(!u)return null;return{id:"feedResultsContainer",width:u.clientWidth,setWidth:function(n){u.style.width=e(n)}}}function w(){return s=s||lt()}function ht(n){var u,t=0,i=0,f,e,o,r,s,h;try{f=(u=_qs(".iusc",n))===null||u===void 0?void 0:u.getAttribute("m");f&&(e=JSON.parse(f),t=e.h,i=e.w)}catch(l){}finally{(t<=0||i<=0)&&(o=_qs(c,n),t=o.height,i=o.width)}return it&&(r=1,s=Math.max(t,i),s>g&&(r=g/s),h=t*i,h>d&&(r=Math.min(r,Math.sqrt(d/h))),r<1&&(t=Math.round(r*t),i=Math.round(r*i))),{width:i,height:t,render:kt(n)}}function gt(n){var i,u,f=p(),e,s,t,o,h;n&&f&&(n.setAttribute(r.MutationObserverFlag,"1"),e="fdsim",s=(i=n.classList)===null||i===void 0?void 0:i.contains(e),s?(n.classList.remove(e),n.classList.add("fdsimf"),t=n.parentElement,t&&(o=(u=getComputedStyle(t))===null||u===void 0?void 0:u.width,st(n,o,parseInt(o)),sb_st(function(){WfPlanner.adjustColumnHeight(f,+t.dataset.col-1,n.clientHeight)},1e3))):(h=new Array(ht(n)),WfPlanner.planItems(f,w(),h)))}function ct(){for(var t,n=f+1;n<i.length;n++)(t=i[n].parentElement)===null||t===void 0?void 0:t.removeChild(i[n]);i.splice(f+1)}function ni(n){[].forEach.call(n.querySelectorAll(".infact > a"),function(n){n.setAttribute("role","button");n.getAttribute("href").indexOf("dtmnu")>0&&(n.setAttribute("aria-label",n.title),n.setAttribute("aria-expanded","false"))})}function ti(n){var t=Math.max(pt,rt);return n.height>t?(n.height=t,!0):!1}function b(n){var t=n.querySelector(c);t&&(ut&&ti(t)&&n.classList.add("fdsnimgs"),ni(n),h.push(n),gt(n))}function ii(n){return o=[],n.forEach(function(n){o.push(ht(n))}),o}function ri(){var n=_ge("dtfe"),i,r;it=(n===null||n===void 0?void 0:n.getAttribute("data-szcst"))==="1";i=fi(n,"data-cfg");i&&(t.WfLayoutConf_hGap=i.hGap||t.WfLayoutConf_hGap,t.WfLayoutConf_vGap=i.vGap||t.WfLayoutConf_vGap,t.WfLayoutConf_hMinGap=i.hMinGap||t.WfLayoutConf_hMinGap,t.WfLayoutConf_hMaxGap=i.hMaxGap||t.WfLayoutConf_hMaxGap,t.WfLayoutConf_maxColCount=i.maxCols||t.WfLayoutConf_maxColCount,a=i.padding||a,v=i.disableGutter||v);r=+(n===null||n===void 0?void 0:n.dataset.mxh);r>0&&(rt=r,ut=!0);ft=+(n===null||n===void 0?void 0:n.dataset.thres)>0}function ui(){s=lt()}function lt(){return{hGap:t.WfLayoutConf_hGap,vGap:t.WfLayoutConf_vGap,hMinGap:t.WfLayoutConf_hMinGap,hMaxGap:t.WfLayoutConf_hMaxGap,minColWidth:t.WfLayoutConf_minColWidth,maxColWidth:t.WfLayoutConf_maxColWidth,minItemHeight:t.WfLayoutConf_minItemHeight,minColCount:t.WfLayoutConf_minColCount,maxColCount:t.WfLayoutConf_maxColCount,gutter:t.WfLayoutConf_gutter}}function fi(n,t){var i;try{i=JSON.parse(n===null||n===void 0?void 0:n.getAttribute(t))}catch(r){return null}return i}function at(){u.style.width=e(tt.clientWidth+(v?0:-l-t.WfLayoutConf_hGap))}function ei(n,t){var i=+n.getAttribute(r.imageItemIdAttribute),u=+t.getAttribute(r.imageItemIdAttribute);return i&&u?i<u?-1:1:0}function vt(){var t=_qs(r.RecentFollowCardSelector),n;t&&i&&i.length>0&&(n=i[i.length-1],n.insertBefore(t.parentElement,n.firstChild))}function k(){if(t.WfLayoutConf_hMinGap&&t.WfLayoutConf_hMaxGap){var n=i.length;y=w().hGap;i.forEach(function(t,i){i!=n-1&&(t.style.paddingRight=e(y));var r=t.childNodes;r.forEach(function(n,t){t!=r.length-1&&(n.style.paddingBottom=e(y))})})}}function yt(n){var s,c,o,e,v;if(wt(),u){for(n&&WfPlanner.reset(p()),ri(),s=_d.querySelectorAll(r.DenseGridColSelector),e=0;e<s.length;e++)i.push(s[e]);for(f=0,a||(l=t.WfLayoutConf_hGap),at(),c=_d.querySelectorAll("".concat(r.DenseGridContainerSelector," ").concat(r.DenseGridItemSelector)),o=[],e=0;e<c.length;e++)o.push(c[e]);o.sort(ei);o.forEach(b);ct();k();v=function(){var n=p();WfPlanner.reset(n);ui();ct();WfPlanner.planItems(n,w(),ii(h))};sj_be(_w,"resize",function(){f=0;at();v();k();vt();sj_evt.fire("Feed.Resize")});vt();_w.fdpln=b}}var r=FeedConstants,h=[],i=[],d=62500,g=350,c="img.mimg",u,l=0,nt,tt,o=[],f=0,a=!1,v=!1,it=!0,y=0,s,rt,ut=!1,pt=_w.innerHeight*.8,ft=!1,et=180,ot="crpttl",t={WfLayoutConf_hGap:20,WfLayoutConf_vGap:0,WfLayoutConf_minColWidth:236,WfLayoutConf_maxColWidth:236,WfLayoutConf_minItemHeight:0,WfLayoutConf_minColCount:2,WfLayoutConf_maxColCount:1e3,WfLayoutConf_hMaxGap:0,WfLayoutConf_hMinGap:0,WfLayoutConf_gutter:0},st=function(n,t,i){var u=n.querySelector(c),e=u.height,o=u.width,f;u.width=i;u.height=Math.floor(e/o*i);f=n.querySelector(".".concat(r.ImageItemWrapperClass));f.style.width=t;u.height<=et&&f.classList.add(ot)},bt=function(n,t,i,r){var u=e(i);n.style.width=u;t.style.width=u;st(n,u,r)},kt=function(n){var t=_qs(".iuscp",n),r=t===null||t===void 0?void 0:t.classList.contains("fd-video-card"),e=r&&!ft;return function(r){var o;return r.dimIndex>=i.length&&(o=dt(),i.push(o),u.insertBefore(o,nt)),r.conWidth!=n.clientWidth?bt(n,i[r.dimIndex],r.conWidth,e?r.conWidth:r.itemWidth):n.clientHeight<=et&&t.classList.add(ot),r.dimIndex+1>f&&(f=r.dimIndex),i[r.dimIndex].appendChild(n),{width:r.conWidth,height:n.clientHeight}}};n.planItemsOnImageLoad=b;yt(!1);sj_evt.bind("Feed.Refresh",function(){yt(!0)});sj_evt.bind("DenseGridResultsUpdated",function(){k()})})(FeedRenderFixedWidth||(FeedRenderFixedWidth={}))